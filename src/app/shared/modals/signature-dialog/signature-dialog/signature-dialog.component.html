<div class="modal-body">

  <div class="d-flex justify-content-center text-center" style="min-height: 12rem;">
    <div class="align-self-center">

      <ng-container *ngIf="state === states.CREATING">
        <div class="spinner-border m-3" style="width: 2.5rem; height: 2.5rem;" role="status">
          <span class="sr-only">Traitement...</span>
        </div>
        <h2>Nous préparons la signature électronique...</h2>
      </ng-container>

      <ng-container *ngIf="state === states.CREATED">
        <blasacar-icon name="clos" klass="icon icon-big icon-clos"></blasacar-icon>
        <h2 class="pb-4">La signature électronique est prête.</h2>
      </ng-container>

      <ng-container *ngIf="state === states.PROCESSING">
        <div class="spinner-border m-3" style="width: 2.5rem; height: 2.5rem;" role="status">
          <span class="sr-only">Traitement...</span>
        </div>
        <h2>Patience... encore quelques instants.</h2>
      </ng-container>

      <ng-container *ngIf="state === states.PROCESSED">
        <blasacar-icon name="clos" klass="icon icon-big icon-clos"></blasacar-icon>
        <h2>Félicitations !</h2>
        <p *ngIf="options?.successMessage">{{ options?.successMessage }}</p>
        <a class="btn btn-primary" (click)="success()">Terminer</a>
      </ng-container>

      <ng-container *ngIf="state === states.ERROR">
        <blasacar-icon name="alerte" klass="icon icon-big icon-alerte"></blasacar-icon>
        <h2>Une erreur technique est survenue</h2>
        <p *ngIf="options?.errorMessage">{{ options?.errorMessage }}</p>
        <a class="btn btn-primary" (click)="error()">Fermer</a>
      </ng-container>

    </div>
  </div>

  <div>
    &nbsp;
    <ng-container *ngIf="state === states.CREATED">

      <a class="link-hover" (click)="toggleHelp()">
        La fenêtre de signature ne s'ouvre pas ?
      </a>

      <div *ngIf="help" class="alert alert-info alert-icon text-left mb-0">
        <blasacar-icon name="infos" klass="icon icon-medium"></blasacar-icon>
        <p>
          Il se peut qu'un bloqueur de fenêtres pop-up empêche l'application d'ouvrir la page.
          Si vous utilisez une telle fonction, essayez de la désactiver afin d'ouvrir la fenêtre.
        </p>
        <a class="btn btn-sm btn-primary" (click)="openTab.emit()">
          Ouvrir à nouveau
        </a>
      </div>

    </ng-container>
  </div>

</div>
